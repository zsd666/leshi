<!DOCTYPE html><html><head><meta charset=UTF-8><title>商品详情</title><link rel=stylesheet href=../css/detail.css><link rel=stylesheet href=../css/index.css><link rel=stylesheet href=http://at.alicdn.com/t/font_1558021_kpgaxy4vcls.css></head><body><div class=topbar><div class=area-center><div class="topbar-container clearfix"><div class=bar-left><ul class=clearfix><li><a href=#>商城首页</a></li><li class=topbar-logout style=display:block><a href=login.html class=login target=_blank>登录</a> <i class=gap></i> <a href=login.html class=register target=_blank>注册</a></li><li></li></ul></div><div class=bar-right><ul class=clearfix><li><a href=# style=color:#fff>个人中心</a></li><li class=menu-label><span>合作渠道 <i class="iconfont icon-xiajiantou2 f12"></i></span><div class=drop-menu><div class=drop-menu-link><a href=#>电视官网</a></div><div class=drop-menu-link><a href=#>商家入驻</a></div></div></li><li class=menu-label><span><a href=# class=help>帮助中心</a> <i class="iconfont icon-xiajiantou2 f12"></i></span><div class=drop-menu><div class=drop-menu-link>配送安装</div><div class=drop-menu-link>售后服务</div><div class=drop-menu-link>运费标准</div><div class=drop-menu-link>联系客服</div></div></li><li class=menu-label><span><a href=# class=phone>手机版</a> <i class="iconfont icon-xiajiantou2 f12"></i></span><div class="qrcode-wrap clearfix drop-menu"><div class=qrcode-pic><img src=../images/erwm.jpg alt=""> <span>扫码下载APP</span></div><div class=qrcode-pic><img src=../images/ewm2.jpg alt=""> <span>扫码访问微商城</span></div></div></li></ul></div></div></div></div><div class="main-head section"><div class=area-center><div class="main-head-container clearfix"><div class=app_download_wrap><span class=close>x</span><div class=qrcode_name>APP下载</div><div class=qrcode_pic><img src=../images/eee.jpg alt=""></div></div><div class="main-shopping-cart qrcode-status"><a href=cart.html target=_blank class=cart><i class="iconfont icon-gouwuche"></i> <span class=cart-name>购物车</span> <span class=cart-product style=display:none>( <span class=product-count></span> )件</span></a></div><div class=mian-head-logo style=float:left><a href=#><img src=../images/lemall_logo.png alt=""></a></div><div class=Le_headother_serch><div class=search_wrap><div class=clearfix><input type=text class=f-search-text style=color:#999 placeholder=乐视超级电视> <button class=f-search-btn><i class=gap>搜</i> <i class=gap>索</i></button></div><div class=L_popupmenu><div class=box></div></div><div class=search_hotkey></div></div></div></div></div></div><div class=section><div class=area-center><div id=box><div id=middleImg><img src=../images/1_2.jpg><div id=middleArea></div></div><div id=small><ul><li class=lis><img src=../images/1_1.webp></li><li><img src=../images/2_1.webp></li><li><img src=../images/3_1.webp></li><li><img src=../images/4_1.webp></li><li><img src=../images/5_1.webp></li></ul></div><div id=bigArea><img id=bigImg src=../images/1_3.jpg></div></div><div class=tb-item-info-r><div class="tb-property tb-property-x"><div class="tb-wrap tb-wrap-newshop"><div class=tb-title><h3 class=tb-main-title>乐视小米高清电视32寸液晶21智能24网络19WiFi语音42/46/55寸家用</h3><p class=tb-subtitle></p></div><ul class="tb-meta tb-promo-meta clearfix"><li class="tb-detail-price tb-clear J_PriceItem"><span class=tb-property-type>价格</span><div class=tb-property-cont><strong style=font-size:14px;color:#3c3c3c;font-weight:400;text-decoration:line-through><em class=tb-rmb>¥</em> <span class=tb-rmb-num>235.00-1458.00</span></strong></div></li><li class="tb-detail-price tb-promo-price tb-clear"><span class=tb-property-type>淘宝价</span><div class=tb-property-cont><div class=tb-promo-mod><div class="tb-promo-hd tb-promo-item"><div class=tb-promo-item-bd><strong class=tb-promo-price><em class=tb-rmb>￥</em> <span class=tb-rmb-num>235.00-1458.00</span> </strong><span class=tb-promo-type>感恩回馈</span> <span class=tb-promo-tips></span></div><div class=tb-promo-item-ft></div></div><div class=tb-promo-bd></div></div></div></li><li class=tb-clear><span class=tb-property-type>优惠</span><div class=tb-other-discount><div class=tb-other-discount-content><div class=J_coin><i class="iconfont icon-taobao"></i> 淘金币可抵 <strong>4.70</strong> 元</div></div></div></li><li class=tb-counter><span class=tb-property-type style=display:none>销量</span><div class=tb-counter-bd><div class=tb-rate-counter><a href=javascript:void(0)><strong>101</strong> <span>累计评论</span></a></div><div class=tb-sell-counter><a href=javascript:void(0)><strong>31</strong> <span>交易成功</span></a></div></div></li><li><div class=btn><button>直接购买</button> <button class=addCart><i class="iconfont icon-gouwuche"></i>添加购物车</button></div></li><li><div class=tb-extra><dl><dt>承诺</dt><dd><a href=#><img src=https://img.alicdn.com/tps/i1/T1EQA5FpVgXXceOP_X-16-16.jpg alt=""> 7天无理由 </a><a href=#><img src=https://img.alicdn.com/tfs/TB1oOuTQFXXXXazapXXXXXXXXXX-32-32.png alt=""> 运费险</a></dd></dl><dl><dt>支付</dt><dd><a href=#><img src=https://img.alicdn.com/tfs/TB1KTHfQFXXXXbnXFXXXXXXXXXX-16-16.png> 蚂蚁花呗 </a><a href=#><img src=https://img.alicdn.com/tfs/TB1dvGWQFXXXXcFaXXXXXXXXXXX-16-16.png alt=""> </a>集分宝</dd></dl><dl><dt>支持</dt><dd>折旧变现，买新更省钱。 <a href=#>详情</a></dd></dl></div></li><li class=clearfix></li></ul></div></div></div></div></div><script src=../lib/jquery/dist/jquery.min.js></script><script>const info=JSON.parse(localStorage.getItem('goodsInfo'))
          if(!info){
            alert('您要查看的数据不存在')
            window.location.href='./list.html'
          }
          bindHtml()
          function bindHtml(){
            $('#middleImg>img').attr('src',info.bimg)
            $('.tb-main-title').text(info.name)
            $('.tb-rmb-num').text(info.price)
            $('#box>.lis').attr('src',info.img)
          }
          $('.addCart').click(() => {
      // console.log('我要添加购物车了')

      // 4-2. 判断是否登录

      // 4-3. 加入到购物车数组里面
      //    先拿到 localStorage 里面的那个数组信息
      //    如果原先没有数据, 那么我就用一个空数组来代替
      //    如果有数据, 就用我们的数据
      const cartList = JSON.parse(localStorage.getItem('cartList')) || []
      let exits = cartList.some(item => {
        // 数组里面每一个的 id === 本页面的这条数据的 id
        return item.id === info.id
      })

      // console.log(exits)
      if (exits) {
        let data = null
        for (let i = 0; i < cartList.length; i++) {
          if (cartList[i].id === info.id) {
               data = cartList[i]
                  break
          }
        }
        // data 就是我找到的这个信息
        data.number++

        // 4-5. 数量添加的时候, 小计价格要改变
        data.xiaoji = data.number * data.price // 数量 * 单价
      } else {
        // 表示没有这个信息, 直接 push 就可以了
        // push 之前, 象里面添加一个 number 信息为 1
        info.number = 1

        // 4-5. 多添加一些信息
        info.xiaoji = info.price // 因为默认是第一个, 小计就是单价
        info.isSelect = false // 默认不选中
        cartList.push(info)
      }

      // 在存储到 localStorage 里面
      localStorage.setItem('cartList', JSON.stringify(cartList))
     })</script></body><script src=../js/detail.js></script></html>